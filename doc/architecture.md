# 🏗️ 프로젝트 아키텍처 (File Separation Rules)

본 프로젝트는 유지보수성과 확장성을 위해 책임을 명확히 분리한 **'환경-행위자-통제'** 모델을 따릅니다.

## 1. 파일 분리 기준

### 🌐 `world.js` (The Stage - 환경)
*   **역할:** 3D 무대 인프라 구축 및 렌더링 환경 관리.
*   **책임 범위:**
    *   Three.js 코어 설정 (Scene, Camera, Renderer).
    *   조명(Light) 및 배경 설정.
    *   트랙(Track), 시소 받침대(Fulcrum) 등 정적 구조물 생성.
    *   윈도우 리사이즈 및 뷰포트 관리.
*   **직관적 정의:** "경주가 어디서 일어나는가?"

### 🐌 `simulation.js` (The Actors & Rules - 행위자와 규칙)
*   **역할:** 게임 캐릭터의 외형 생성 및 물리적 행동 법칙 정의.
*   **책임 범위:**
    *   달팽이 및 천사 모델(Mesh) 생성 Factory.
    *   달팽이 이동 물리 알고리즘 (속도, 보정, 후진 방지).
    *   특수 이벤트(천사의 가호) 발생 및 애니메이션 로직.
    *   시각 효과 (점액 트레일, 사망 애니메이션).
*   **직관적 정의:** "누가 무엇을 하고, 물리 법칙은 어떻게 작동하는가?"

### 🎬 `script.js` (The Director - 통제 및 인터페이스)
*   **역할:** 전체 게임 흐름 지휘 및 사용자와의 소통.
*   **책임 범위:**
    *   전역 상수(CONFIG) 및 게임 상태(gameState) 관리.
    *   DOM 이벤트 핸들링 (설정창, 시작 버튼, 입력값 처리).
    *   HUD(진행바, 타이머, 속도계) 데이터 업데이트.
    *   메인 애니메이션 루프 실행 및 타 모듈 호출.
*   **직관적 정의:** "게임은 언제 시작되고, 사용자에게 무엇을 보여주는가?"

---

## 2. 모듈 간 협력 원칙

1.  **단방향 흐름:** `script.js`가 상위 제어자로서 `world.js`와 `simulation.js`의 기능을 호출합니다.
2.  **데이터 중심:** 물리 연산에 필요한 상수나 상태값은 `script.js`에서 관리하며, `simulation.js`의 함수에 인자로 전달하여 순수 로직을 수행하도록 합니다.
3.  **리소스 관리:** 3D 객체(Mesh)의 생성은 `simulation.js`에서 하되, 실제 Scene에 추가하거나 제거하는 것은 `World` 참조를 통해 `script.js`에서 조율합니다.
